## üöÜ TrainParserBot

<div align="center">

  <a href="https://t.me/rzd_train_search_bot">
    <img alt="Telegram" src="https://img.shields.io/badge/Telegram-@rzd__train__search__bot-2CA5E0?logo=telegram" />
  </a>
  <img alt="Python" src="https://img.shields.io/badge/Python-3.10%2B-blue?logo=python" />
  <img alt="License" src="https://img.shields.io/badge/License-MIT-green" />

</div>

Telegram-–±–æ—Ç –Ω–∞ aiogram –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–µ–∑–¥–æ–≤ –†–ñ–î –∏ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –º–µ—Å—Ç. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ—à–∞–≥–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –ø–æ–∏—Å–∫–∞ –≤ –æ–¥–Ω–æ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-—Å–æ–æ–±—â–µ–Ω–∏–∏, —Ö—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ SQLite –∏ —É–º–µ–µ—Ç –ø—Ä–∏—Å—ã–ª–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –º–µ—Å—Ç.

–°—Å—ã–ª–∫–∞ –Ω–∞ –±–æ—Ç–∞: [@rzd_train_search_bot](https://t.me/rzd_train_search_bot)

<details>
  <summary><b>–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</b></summary>

- [‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [üß™ –¢–µ—Å—Ç—ã](#-—Ç–µ—Å—Ç—ã)
- [üõ†Ô∏è CI](#-ci)
- [üìé –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ–∞–π–ª—ã](#-–ø–æ–ª–µ–∑–Ω—ã–µ-—Ñ–∞–π–ª—ã)
- [üß≠ –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ UX](#-–ø—Ä–∏–º–µ—á–∞–Ω–∏—è-–ø–æ-ux)
- [üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)

</details>

### ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **–ü–æ—à–∞–≥–æ–≤—ã–π –ø–æ–∏—Å–∫**: –≤—ã–±–æ—Ä —Å—Ç–∞–Ω—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚Üí –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è ‚Üí –¥–∞—Ç—ã ‚Üí –ø–æ–µ–∑–¥–∞
- **–ê–∫–∫—É—Ä–∞—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –≤—Å–µ–≥–¥–∞ –æ–¥–Ω–æ –ø—Ä–æ–≥—Ä–µ—Å—Å-—Å–æ–æ–±—â–µ–Ω–∏–µ, –ª–∏—à–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —É–¥–∞–ª—è—é—Ç—Å—è
- **–ü–æ–¥–ø–∏—Å–∫–∏**: –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–ª–∏—á–∏—è –º–µ—Å—Ç —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
- **SQLite**: —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ CI**: GitHub Actions –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤

> üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –±–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ –±—ã—Å—Ç—Ä—ã–π —Ä–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫, —Ç–∞–∫ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∏ —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –æ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –º–µ—Å—Ç.

### üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- `bot.py`: —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞; –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è aiogram, —Ä–æ—É—Ç–µ—Ä–æ–≤ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `handlers/`: –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ (`CommandsHandler`) –∏ –ø–æ–∏—Å–∫–∞ (`SearchHandler`)
- `services/`: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
  - `rzd_api.py`: —Ä–∞–±–æ—Ç–∞ —Å –ø—É–±–ª–∏—á–Ω—ã–º–∏ API –†–ñ–î
  - `notification.py`: –æ—Ç–ø—Ä–∞–≤–∫–∞/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π Telegram Bot API
  - `monitoring.py`: –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫
- `database/`: –º–æ–¥–µ–ª–∏ (`models.py`) –∏ –º–µ–Ω–µ–¥–∂–µ—Ä –ë–î (`manager.py`)
- `config.py`: –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ .env (python-dotenv) —Å –¥–µ—Ñ–æ–ª—Ç–∞–º–∏
- `tests/`: pytest (unit + integration)

### ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.10+
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt`:
  - aiogram, aiohttp, requests, python-dotenv, pytest

### üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞
1) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```
python -m pip install -r requirements.txt
```

2) –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ (–∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `python setup.py`, –æ–Ω —Å–æ–∑–¥–∞—Å—Ç —à–∞–±–ª–æ–Ω)
```
BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrSTUvwxYZ
DATABASE_PATH=data/train_subscriptions.db
```
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- `MONITORING_INTERVAL` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 300)
- `MAX_MESSAGE_LENGTH` (4000)
- `MAX_CALLBACK_DATA_LENGTH` (64)
- `MAX_STATIONS_PER_SEARCH` (10)
- `MIN_QUERY_LENGTH` (2)
- `MAX_TRAINS_PER_RESULT` (10)
- `RZD_API_URL`, `RZD_SUGGEST_URL`, `USER_AGENT`

3) –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```
python bot.py
```

> ‚ö†Ô∏è –í–∞–∂–Ω–æ: –¥–ª—è —Ä–∞–±–æ—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ –ø—É–±–ª–∏—á–Ω—ã–º API –†–ñ–î; –æ–Ω–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

### üß™ –¢–µ—Å—Ç—ã
- –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã:
```
pytest
```
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (–≤—ã–ø–æ–ª–Ω—è—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API –†–ñ–î) –æ—Ç–∫–ª—é—á–µ–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –ß—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å:
```
RUN_INTEGRATION_TESTS=1 pytest
```

### üõ†Ô∏è CI
- GitHub Actions: `.github/workflows/ci.yml`
  - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
  - –°–æ–∑–¥–∞–µ—Ç `.env` —Å `BOT_TOKEN` –∏–∑ Secrets
  - –ó–∞–ø—É—Å–∫–∞–µ—Ç `pytest` (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ—Ç–∫–ª—é—á–µ–Ω—ã)

### üìé –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ–∞–π–ª—ã
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: `QUICK_START.md`
- –°–≤–æ–¥–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞: `PROJECT_SUMMARY.md`

### üß≠ –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ UX
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–±–æ—Ä–µ/–≤–≤–æ–¥–µ –±–æ—Ç —É–¥–∞–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã, –æ—Å—Ç–∞–≤–ª—è—è –æ–¥–Ω–æ –ø—Ä–æ–≥—Ä–µ—Å—Å-—Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ç–µ–∫—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–¥—Å–∫–∞–∑–∫–æ–π
- –ï—Å–ª–∏ –≤ callback –ø—Ä–∏—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –∫–æ–¥ —Å—Ç–∞–Ω—Ü–∏–∏, –±–æ—Ç –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ –∫–æ–¥—É —á–µ—Ä–µ–∑ API

### üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è
MIT (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é). –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª LICENSE –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Ä–∞–∑–¥–µ–ª.



